import{_ as T}from"./nav-bar-8aedbc5e.mjs";import{_ as S,d as k,a as x,r as i,b as U,c as B,e as v,f as o,t as I,B as u,C as m,w as L,n as f,l as N,h as P,m as C}from"./entry-f1ebb262.mjs";const O=k({__name:"signup",setup(w,{expose:n}){n(),x({title:"sign up",viewport:"width=device-width, initial-scale=1, maximum-scale=1",charset:"utf-8",meta:[{name:"description",content:"sign up page"}],link:[{rel:"icon",href:f}]});const c=i(),e=i(),d=i(),t=i(),l=i(!0),s=i(),a=()=>{c.value.length<10?(s.value.classList.add("drop"),t.value="enter a valid phone number",setTimeout(()=>{t.value=null,s.value.classList.remove("drop")},2e3)):(async()=>{const p={phone:c.value};await(await fetch("http://localhost:8000/check-number",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json()==!0?(s.value.classList.add("drop"),t.value="phone number in use",setTimeout(()=>{t.value=null,s.value.classList.remove("drop")},2e3)):(r.phone=c.value,r.password!=null&&(l.value=!1))})()},g=()=>{e.value!=d.value?(s.value.classList.add("drop"),t.value="passwords do not match",setTimeout(()=>{t.value=null,s.value.classList.remove("drop")},700)):(r.password=e.value,r.phone!=null&&(l.value=!1))},r={phone:null,password:null},h={phone:c,password:e,passwordRepeat:d,messageResponse:t,isButtonActive:l,res:s,checkPhone:a,checkTwoPasswords:g,dataToSend:r,signUp:async()=>{const p=await(await fetch("http://localhost:8000/create-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(p!=!1){l.value=!0;const _=p._id;s.value.classList.add("drop"),t.value="sucessfully sign up",sessionStorage.setItem("userID",_),console.log(sessionStorage.getItem("userID")),setTimeout(()=>{P().push("/")},1500)}}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),R={class:"signup-wrapper"},V=o("img",{src:f,alt:""},null,-1),j=o("h1",null,"Sign Up",-1),D={class:"form"},A=["disabled"],J={class:"other"},E=C("log in");function F(w,n,c,e,d,t){const l=T,s=N;return U(),B("main",null,[v(l),o("div",R,[o("p",{ref:"res",class:"alert"},I(e.messageResponse),513),V,j,o("div",D,[u(o("input",{type:"text",placeholder:"phone number","onUpdate:modelValue":n[0]||(n[0]=a=>e.phone=a),onFocusout:e.checkPhone},null,544),[[m,e.phone]]),u(o("input",{type:"password",name:"",placeholder:"password","onUpdate:modelValue":n[1]||(n[1]=a=>e.password=a)},null,512),[[m,e.password]]),u(o("input",{type:"password",name:"",placeholder:"repeat password","onUpdate:modelValue":n[2]||(n[2]=a=>e.passwordRepeat=a),onKeyup:e.checkTwoPasswords,ref:"input"},null,544),[[m,e.passwordRepeat]]),o("button",{disabled:e.isButtonActive,onClickOnce:e.signUp},"Sign up ",40,A),o("div",J,[v(s,{to:"/login"},{default:L(()=>[E]),_:1})])])])])}var q=S(O,[["render",F]]);export{q as default};
