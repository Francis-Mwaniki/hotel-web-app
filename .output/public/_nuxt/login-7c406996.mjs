import{_ as S}from"./nav-bar-8aedbc5e.mjs";import{_ as T,d as C,a as L,r as s,b as P,c as D,e as g,f as o,t as _,B as h,C as w,D as V,w as j,n as b,l as B,h as I,m as N}from"./entry-f1ebb262.mjs";const O=C({__name:"login",setup(k,{expose:t}){t(),L({title:"log in",viewport:"width=device-width, initial-scale=1, maximum-scale=1",charset:"utf-8",meta:[{name:"description",content:"My amazing site."}],link:[{rel:"icon",href:b}]});const i=s(),e=s(),n=s(),a=s(),d=async()=>{const u={phone:i.value};await(await fetch("http://localhost:8000/check-number",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json()!=!0?(a.value.classList.add("drop"),n.value="invalid phone number",setTimeout(()=>{n.value=null,a.value.classList.remove("drop")},700)):e.value=null},r=s(),l=s(!0),y=()=>{m.value=null,(r.value!=""||e==null)&&(l.value=!1)},m=s(),c=s(),v=s(),f={phone:i,userResponse:e,messageResponse:n,res:a,checkPhone:d,password:r,ifCorrectData:l,checkPassword:y,wrongPassword:m,userID:c,ifKeepLogged:v,login:async()=>{const u={phone:i.value,password:r.value},p=await(await fetch("http://localhost:8000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();p===!1?(a.value.classList.add("drop"),n.value="wrong password",setTimeout(()=>{n.value=null,a.value.classList.remove("drop")},1500)):(a.value.classList.add("drop"),n.value="log in succesfull",setTimeout(()=>{n.value=null,a.value.classList.remove("drop")},1500),c.value=p._id,v.value==!0?localStorage.setItem("userID",c.value):sessionStorage.setItem("userID",c.value),I().push("/"))}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),R={class:"login-wrapper"},K=o("img",{src:b,alt:""},null,-1),M=o("h1",null,"log in",-1),U={class:"form"},J={class:"keep-logged"},z=o("label",{for:"checkbox"}," keep me logged in",-1),E=["disabled"],H={class:"other"},q=o("a",{href:"#"},"forgot your password",-1),A=N("sign up");function F(k,t,i,e,n,a){const d=S,r=B;return P(),D("main",null,[g(d),o("div",R,[o("p",{ref:"res",class:"alert"},_(e.messageResponse),513),K,M,o("div",U,[o("p",null,_(e.userResponse),1),o("p",null,_(e.wrongPassword),1),h(o("input",{type:"text",placeholder:"phone number","onUpdate:modelValue":t[0]||(t[0]=l=>e.phone=l),onMouseout:e.checkPhone},null,544),[[w,e.phone]]),h(o("input",{type:"password",name:"",id:"",placeholder:"password","onUpdate:modelValue":t[1]||(t[1]=l=>e.password=l),onKeyup:e.checkPassword},null,544),[[w,e.password]]),o("div",J,[z,h(o("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[2]||(t[2]=l=>e.ifKeepLogged=l)},null,512),[[V,e.ifKeepLogged]])]),o("button",{disabled:e.ifCorrectData,onClick:e.login},"login",8,E),o("div",H,[q,g(r,{to:"/signup"},{default:j(()=>[A]),_:1})])])])])}var Y=T(O,[["render",F]]);export{Y as default};
